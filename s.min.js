fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQJ7PS8pvnCKdpLgJFonsZNN54Rs8oTpzGgCxhbfZzd3KmKb9k12OEwgAWuDAHiIPraWKxoS5TlCm4X/pub?gid=0&single=true&output=csv").then((e=>e.text())).then((e=>{const t=e.trim().split("\n");if(t.length>0){const e=t[0].split(",")[0].replace(",",".");document.getElementById("dolarValor").textContent=e||"N/A"}else document.getElementById("dolarValor").textContent="Sin datos"})).catch((e=>{document.getElementById("dolarValor").textContent="Error",console.error("Error al obtener d√≥lar:",e)}));const e=new Intl.DateTimeFormat("es-AR").format(new Date);document.getElementById("fechaActual").textContent=e,window.onload=function(){document.getElementById("logo-desktop").src="images/logo-miphone-1.svg?refresh="+(new Date).getTime()};const t=document.querySelector(".loader-local");t.classList.remove("loader-local-hidden"),Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vRr62BlKCzICpC0ctnU2mRB8cq_SOCcsgydXQJXD5pQvasO1b1iT0Wp_L7sFxH8UGJCepaMjng1GUO0/pub?gid=1610793698&single=true&output=csv",{download:!0,complete:function(e){!function(e){const t=document.getElementById("categoriasContainer"),a=document.getElementById("plantilla-categoria");t.innerHTML="",e.forEach(((e,s)=>{const r=`cat-${s}`,l=e.headers.indexOf("Ocultar"),c=(e.headers.indexOf("Detalles"),e.headers.indexOf("Fotos")),i=e.headers.findIndex(((e,t)=>t!==l)),d=a.content.cloneNode(!0),u=(d.querySelector(".accordion"),d.querySelector(".accordion-button")),p=d.querySelector(".accordion-collapse"),m=n[e.nombre]||"bi bi-phone",b=`collapse-${r}`,h=`heading-${r}`;u.setAttribute("data-bs-target",`#${b}`),u.setAttribute("aria-controls",b),p.id=b,p.setAttribute("aria-labelledby",h),u.closest("h2").id=h,d.querySelector(".icono-categoria").className=`me-2 icono-categoria ${m}`,d.querySelector(".nombre-categoria").textContent=e.nombre;d.querySelector(".alerta-categoria").innerHTML=function(e){const t={"MACBOOK AIR":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio","MACBOOK PRO":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio",IPHONE:"¬°Combo cargador original (Apple 20W, MWVV3AM) + U$30!",SAMSUNG:"Por otros productos de la marca (Linea Z, Samsung Tab, etc) consultanos por WhatsApp",ACCESORIOS:"Consultar disponibilidad en modelos y colores"};return t[e]?`\n    <div class="alert alert-info d-flex justify-content-center align-items-center text-center mb-3 py-2 px-3" role="alert">\n      <i class="bi bi-info-circle-fill me-2"></i>\n      <div class="small">${t[e]}</div>\n    </div>\n  `:""}(e.nombre);const g=d.querySelector(".encabezados");e.headers.forEach(((e,t)=>{if(t!==l){const t=document.createElement("th");t.textContent=e,g.appendChild(t)}}));const f=d.querySelector(".filas-productos");let y=null;e.productos.filter((e=>-1===l||"x"!==e[l].toLowerCase())).forEach((t=>{const n=t.every((e=>""===e)),a=document.createElement("tr");if(n){const t=document.createElement("td");t.colSpan=e.headers.length-(-1!==l?1:0),t.innerHTML="&nbsp;",a.appendChild(t)}else t.forEach(((t,n)=>{if(n===l)return;const s=document.createElement("td");if(n===i){const e=t&&t!==y;return y=t||y,e?(s.textContent=t,s.classList.add("fusion-celda")):s.innerHTML=`<span class="visually-hidden">${t}</span>`,void a.appendChild(s)}if("L"===e.headers[n]&&t)return s.innerHTML=o[t]||t,void a.appendChild(s);if(n===c&&t){const e=document.createElement("button");return e.className="btn btn-secondary btn-sm",e.innerHTML='<i class="bi bi-image"></i>',e.title="Ver fotos",e.setAttribute("data-bs-toggle","modal"),e.setAttribute("data-bs-target","#modalFotos"),e.setAttribute("data-fotos",t),e.addEventListener("click",(()=>{const e=t.split(",").map((e=>e.trim())).filter(Boolean),n=document.querySelector("#carouselFotos .carousel-inner");n.innerHTML="",e.forEach(((e,t)=>{const o=document.createElement("div");o.className="carousel-item"+(0===t?" active":""),o.innerHTML=`<img src="${e}" class="d-block w-75 mx-auto" alt="Foto ${t+1}">`,n.appendChild(o)}))})),s.appendChild(e),void a.appendChild(s)}s.innerHTML=t||"&nbsp;",a.appendChild(s)}));f.appendChild(a)})),t.appendChild(d)}))}(function(e){const t=[];let n=null,o=[],a=[],s=!1;for(let r=0;r<e.length;r++){const l=e[r].map((e=>(e||"").trim())),c=l.filter((e=>""!==e));1!==c.length||c[0]!==c[0].toUpperCase()?s?(o=l,s=!1):o.length>0&&a.push(l):(n&&o.length>0&&t.push({nombre:n,headers:o,productos:a}),n=c[0],o=[],a=[],s=!0)}n&&o.length>0&&t.push({nombre:n,headers:o,productos:a});return t}(e.data)),t.classList.add("loader-local-hidden")}});const n={IPHONE:"bi-apple",AIRPODS:"bi-earbuds","APPLE WATCH":"bi-smartwatch",AIRTAG:"bi-tag",IPAD:"bi-tablet-fill","MACBOOK AIR":"bi-laptop","MACBOOK PRO":"bi-laptop",PLAYSTATION:"bi-playstation",XBOX:"bi-xbox","NINTENDO SWITCH":"bi-nintendo-switch",VR:"bi-headset-vr",GOPRO:"bi-camera-video",INSTA360:"bi-camera-video",SMARTWATCH:"bi-watch",ACCESORIOS:"bi-bag-plus","DRONE DJI":"bi-robot"},o={NEW:'<span class="badge bg-warning text-dark">‚úàÔ∏è¬°NUEVO!</span>',SALE:'<span class="badge bg-danger">üî•¬°OFERTA!</span>',HOT:'<span class="badge bg-primary">üî• HOT</span>',LIMITED:'<span class="badge bg-info text-dark">‚è≥ LIMITADO</span>'};document.getElementById("searchGeneral").addEventListener("input",function(e,t){let n;return(...o)=>{clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}((()=>{const e=document.getElementById("searchGeneral").value.toLowerCase().trim(),t=e?e.split(/\s+/):[],n=document.getElementById("resultadoBusqueda");let o=0;document.querySelectorAll(".accordion-flush").forEach((n=>{const a=n.querySelector(".accordion-button"),s=n.querySelector(".collapse"),r=bootstrap.Collapse.getOrCreateInstance(s,{toggle:!1});if(!e)return n.style.display="",r.hide(),a.classList.add("collapsed"),a.setAttribute("aria-expanded","false"),void n.querySelectorAll("tbody tr").forEach((e=>{e.style.display=""}));const l=a.innerText.toLowerCase(),c=Array.from(n.querySelectorAll("tbody tr"));let i=!1;c.forEach((e=>{const n=Array.from(e.cells).filter(((e,t)=>2!==t)).map((e=>e.innerText)).join(" ").toLowerCase()+" "+l;if(e.innerText.trim()){const a=t.every((e=>n.includes(e)));e.style.display=a?"":"none",a&&(i=!0,o++)}else e.style.display="none"})),i?(n.style.display="",r.show(),a.classList.remove("collapsed"),a.setAttribute("aria-expanded","true")):(r.hide(),a.classList.add("collapsed"),a.setAttribute("aria-expanded","false"),n.style.display="none")})),e?0===o?(n.innerHTML='<span class="badge bg-danger">Sin resultados. Consultar existencia por WhatsApp</span>',n.classList.add("no-resultado"),n.classList.remove("resultado-encontrado")):(n.innerHTML=`<span class="badge bg-success">${o} resultado${1!==o?"s":""} encontrado${1!==o?"s":""}</span>`,n.classList.add("resultado-encontrado"),n.classList.remove("no-resultado")):(n.innerHTML="",n.classList.remove("no-resultado","resultado-encontrado"))}),300)),document.getElementById("clearSearch").addEventListener("click",(function(){const e=document.getElementById("searchGeneral");e.value="",e.dispatchEvent(new Event("input"))})),window.buscarMarca=function(e){const t=document.getElementById("searchGeneral");t.value=e,t.dispatchEvent(new Event("input"))},document.getElementById("faqModal").addEventListener("hidden.bs.modal",(()=>{document.querySelectorAll("#faqModal .accordion-collapse.show").forEach((e=>{new bootstrap.Collapse(e,{toggle:!1}).hide()}))}));
