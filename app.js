const e={csvUrl:"https://docs.google.com/spreadsheets/d/e/2PACX-1vRr62BlKCzICpC0ctnU2mRB8cq_SOCcsgydXQJXD5pQvasO1b1iT0Wp_L7sFxH8UGJCepaMjng1GUO0/pub?gid=1610793698&single=true&output=csv",cotizacionUrl:"https://docs.google.com/spreadsheets/d/e/2PACX-1vQJ7PS8pvnCKdpLgJFonsZNN54Rs8oTpzGgCxhbfZzd3KmKb9k12OEwgAWuDAHiIPraWKxoS5TlCm4X/pub?gid=0&single=true&output=csv",COTI_KEY:"cotiBlue",COTI_TTL:9e5,WA_BASE:"https://wa.me/5491127737463?text=",GLOSARIO:{ACCESORIOS:{adj:"est√°n disponibles",art:"las"},AIRPODS:{adj:"est√°n disponibles",art:"los"},AIRTAG:{adj:"est√°n disponibles",art:"los"},"APPLE WATCH":{adj:"est√° disponible",art:"el"},"DRONE DJI":{adj:"est√° disponible",art:"el"},GOPRO:{adj:"est√° disponible",art:"la"},INSTA360:{adj:"est√° disponible",art:"la"},IPAD:{adj:"est√° disponible",art:"el"},IPHONE:{adj:"est√° disponible",art:"el"},"MACBOOK AIR":{adj:"est√° disponible",art:"la"},"MACBOOK PRO":{adj:"est√° disponible",art:"la"},"NINTENDO SWITCH":{adj:"est√° disponible",art:"la"},PLAYSTATION:{adj:"est√° disponible",art:"la"},SAMSUNG:{adj:"est√° disponible",art:"el"},SMARTWATCH:{adj:"est√°n disponibles",art:"los"},VR:{adj:"est√°n disponibles",art:"los"},XBOX:{adj:"est√° disponible",art:"la"},XIAOMI:{adj:"est√° disponible",art:"el"},"XIAOMI (POCO)":{adj:"est√° disponible",art:"el"},"XIAOMI (REDMI + REDMI NOTE)":{adj:"est√° disponible",art:"el"}},ICONOS:{IPHONE:"bi-apple",AIRPODS:"bi-earbuds","APPLE WATCH":"bi-smartwatch",AIRTAG:"bi-tag",IPAD:"bi-tablet-fill","MACBOOK AIR":"bi-laptop","MACBOOK PRO":"bi-laptop",PLAYSTATION:"bi-playstation",XBOX:"bi-xbox","NINTENDO SWITCH":"bi-nintendo-switch",VR:"bi-headset-vr",GOPRO:"bi-camera-video",INSTA360:"bi-camera-video",SMARTWATCH:"bi-watch",ACCESORIOS:"bi-bag-plus","DRONE DJI":"bi-robot"},BADGES:{NEW:'<span class="badge bg-warning text-dark">‚úàÔ∏è¬°NUEVO!</span>',SALE:'<span class="badge bg-danger">üî•¬°OFERTA!</span>',HOT:'<span class="badge bg-primary">üî• HOT</span>',LIMITED:'<span class="badge bg-info text-dark">‚è≥ LIMITADO</span>'},ALERTAS:{"MACBOOK AIR":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio","MACBOOK PRO":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio",IPHONE:"¬°Con la compra de un iPhone + U$30, llevate un cargador 20W Apple ORIGINAL!",SAMSUNG:"Por otros productos de la marca (Linea Z, Samsung Tab, etc) consultanos por WhatsApp",ACCESORIOS:"Consultar disponibilidad en modelos y colores"}},t={dolarValor:document.getElementById("dolarValor"),fechaActual:document.getElementById("fechaActual"),logoLink:document.getElementById("logo-link"),loader:document.querySelector(".loader-local"),categoriasContainer:document.getElementById("categoriasContainer"),plantillaCategoria:document.getElementById("plantilla-categoria"),searchGeneral:document.getElementById("searchGeneral"),clearSearch:document.getElementById("clearSearch"),resultadoBusqueda:document.getElementById("resultadoBusqueda"),marcasTrack:document.querySelector(".marcas-track"),faqModal:document.getElementById("faqModal")};function a(e){t.dolarValor.textContent=e}function l(a){t.categoriasContainer.innerHTML="",a.forEach(((a,l)=>{let{nombre:o,headers:r,productos:s}=a,d=e=>r.indexOf(e),i=t.plantillaCategoria.content.cloneNode(!0),c=i.querySelector(".accordion-button"),p=i.querySelector(".accordion-collapse"),m=`collapse-cat-${l}`;c.dataset.bsTarget=`#${m}`,c.setAttribute("aria-controls",m),p.id=m,i.querySelector(".icono-categoria").className=`me-2 icono-categoria ${e.ICONOS[o]||"bi bi-phone"}`,i.querySelector(".nombre-categoria").textContent=o,i.querySelector(".alerta-categoria").innerHTML=e.ALERTAS[o]?`<div class="alert alert-info d-flex justify-content-center align-items-center text-center mb-3 py-2 px-3">\n     <i class="bi bi-info-circle-fill me-2"></i>\n     <div class="small">${e.ALERTAS[o]}</div>\n   </div>`:"";let u=document.createElement("div");u.className="lista-productos","ACCESORIOS"===o?function(t,a,l){let{modeloIdx:o,varianteIdx:r,precioIdx:s,fotosIdx:d,badgeIdx:i,ocultarIdx:c,nombre:p}=l;a.forEach((a=>{if(-1!==c&&"x"===a[c]?.toLowerCase())return;let l=a[o]?.trim(),m=a[r]?.trim(),u=a[s]?.trim(),b=a[d]?.trim(),C=a[i]?.trim();if(!l&&!m&&!u)return;let g=document.createElement("div");g.className="grupo-modelo tarjeta-producto";let h=document.createElement("div");h.className="titulo-modelo",h.textContent=l,b&&h.appendChild(function(e){let t=document.createElement("button");return t.className="btn btn-link btn-sm ms-2 p-0",t.textContent="Ver fotos",t.dataset.bsToggle="modal",t.dataset.bsTarget="#modalFotos",t.addEventListener("click",(()=>{let t=e.split(",").map((e=>e.trim())).filter(Boolean),a=document.querySelector("#carouselFotos .carousel-inner");a.innerHTML="",t.forEach(((e,t)=>{let l=document.createElement("div");l.className="carousel-item"+(0===t?" active":""),l.innerHTML=`<img src="${e}" class="d-block w-75 mx-auto" alt="Foto ${t+1}">`,a.appendChild(l)}))})),t}(b)),g.appendChild(h);let I=document.createElement("div");I.className="variante primera-variante";let E=document.createElement("div");E.className="detalle",E.textContent=m;let A=document.createElement("div");A.className="precio-badge",C&&e.BADGES[C]&&(A.innerHTML=e.BADGES[C]),A.appendChild(Object.assign(document.createElement("div"),{textContent:u||"Consultar"})),I.append(E,A),g.appendChild(I);let O=document.createElement("a");O.className="btn btn-wsp btn-sm d-inline-flex align-items-center gap-1 mt-2 ms-auto",O.href=n(p,l),O.target="_blank",O.rel="noopener noreferrer",O.innerHTML='<i class="bi bi-whatsapp"></i><span class="wsp-label">Consultar</span>';let f=document.createElement("div");f.className="d-flex justify-content-end",f.appendChild(O),g.appendChild(f),t.appendChild(g)}))}(u,s,{modeloIdx:d("Producto"),varianteIdx:d("Informaci√≥n"),precioIdx:d("Precio"),fotosIdx:d("Fotos"),badgeIdx:d("L"),ocultarIdx:d("Ocultar"),nombre:o}):function(t,a,l){let{modeloIdx:o,varianteIdx:r,precioIdx:s,specsIdx:d,badgeIdx:i,ocultarIdx:c,nombre:p}=l,m="",u=!0,b=null;a.forEach(((l,C)=>{if(-1!==c&&"x"===l[c]?.toLowerCase())return;let g=l[o]?.trim(),h=l[r]?.trim(),I=l[s]?.trim(),E=l[d]?.trim(),A=l[i]?.trim();if(!g)return;if(g!==m){m=g,u=!0,b=null;let e=document.createElement("div");e.className="grupo-modelo tarjeta-producto";let a=document.createElement("div");a.className="titulo-modelo";let l=document.createElement("span");if(l.textContent=g,a.appendChild(l),E){let e=document.createElement("a");e.href=E,e.textContent="Ver ficha",e.target="_blank",e.rel="noopener noreferrer",e.className="btn btn-link btn-sm p-0 ms-auto",a.appendChild(e)}e.appendChild(a),t.appendChild(e),(b=document.createElement("a")).className="btn btn-wsp btn-sm d-inline-flex align-items-center gap-1",b.href=n(p,g),b.target="_blank",b.rel="noopener noreferrer",b.innerHTML='<i class="bi bi-whatsapp"></i><span class="wsp-label">Consultar</span>'}let O=document.createElement("div");O.className="variante"+(u?" primera-variante":""),u=!1;let f=document.createElement("div");f.className="detalle",f.textContent=h;let S=document.createElement("div");S.className="precio-badge",A&&e.BADGES[A]&&(S.innerHTML=e.BADGES[A]),S.appendChild(Object.assign(document.createElement("div"),{textContent:I||"Consultar"})),O.append(f,S),t.lastElementChild.appendChild(O);let v=a[C+1]?.[o]?.trim();if(g!==v){let e=document.createElement("div");e.className="d-flex justify-content-end mt-2",e.appendChild(b),t.lastElementChild.appendChild(e)}}))}(u,s,{modeloIdx:0,varianteIdx:1,precioIdx:d("Precio"),specsIdx:d("Specs"),badgeIdx:d("L"),ocultarIdx:d("Ocultar"),nombre:o}),p.querySelector(".accordion-body").appendChild(u),t.categoriasContainer.appendChild(i)}))}function n(t,a){let l=t.toUpperCase().trim(),{art:n="el/la",adj:o="est√° disponible"}=e.GLOSARIO[l]||{};return e.WA_BASE+encodeURIComponent(`¬°Hola! Vi ${n} ${t} ${a} en la web y me gustar√≠a saber si ${o}.`)}!function(){let t=function(){try{let t=localStorage.getItem(e.COTI_KEY);if(!t)return null;let{value:a,time:l}=JSON.parse(t);return Date.now()-l<e.COTI_TTL?a:null}catch{return null}}();t?a(t):fetch(e.cotizacionUrl).then((e=>e.text())).then((t=>{let l=t.trim().split("\n")[0]?.split(",")[0]?.replace(",",".")||"N/A";a(l),function(t){try{localStorage.setItem(e.COTI_KEY,JSON.stringify({value:t,time:Date.now()}))}catch{}}(l)})).catch((()=>a("Error")))}(),t.fechaActual.textContent=new Intl.DateTimeFormat("es-AR").format(new Date),t.logoLink?.addEventListener("click",(e=>{e.preventDefault(),location.reload()})),t.loader?.classList.remove("loader-local-hidden"),Papa.parse(e.csvUrl,{download:!0,complete({data:e}){let a=function(e){let t=[],a=null,l=[],n=[],o=!1;return e.forEach((e=>{let r=e.map((e=>(e||"").trim())),s=r.filter(Boolean);1===s.length&&s[0]===s[0].toUpperCase()?(a&&l.length&&t.push({nombre:a,headers:l,productos:n}),a=s[0],l=[],n=[],o=!0):o?(l=r,o=!1):l.length&&n.push(r)})),a&&l.length&&t.push({nombre:a,headers:l,productos:n}),t}(e);l(a),t.loader.classList.add("loader-local-hidden")}}),t.faqModal?.addEventListener("hidden.bs.modal",(()=>{document.querySelectorAll("#faqModal .accordion-collapse.show").forEach((e=>bootstrap.Collapse.getOrCreateInstance(e).hide()))})),t.searchGeneral.addEventListener("input",function(e,t){let a;return(...l)=>{clearTimeout(a),a=setTimeout((()=>e(...l)),t)}}((function(){let e=t.searchGeneral.value.toLowerCase().trim(),a=e.split(/\s+/).filter(Boolean),l=0;t.resultadoBusqueda.textContent="",document.querySelectorAll(".accordion-flush").forEach((t=>{let n=t.querySelector(".accordion-button"),o=t.querySelector(".accordion-collapse"),r=bootstrap.Collapse.getOrCreateInstance(o,{toggle:!1}),s=n.textContent.toLowerCase(),d=!1;t.querySelectorAll(".grupo-modelo").forEach((e=>{let t=!1,n=e.querySelector(".titulo-modelo").textContent.toLowerCase();e.querySelectorAll(".variante").forEach((e=>{let o=e.querySelector(".detalle").textContent.toLowerCase(),r=e.querySelector(".badge")?.textContent.toLowerCase()||"",d=`${s} ${n} ${o} ${r}`,i=a.every((e=>d.includes(e)));e.style.display=i?"":"none",i&&(t=!0,l++)})),e.style.display=t?"":"none",t&&(d=!0)})),e?d?(t.style.display="",r.show(),n.classList.remove("collapsed")):(t.style.display="none",r.hide(),n.classList.add("collapsed")):(t.style.display="",r.hide(),n.classList.add("collapsed"),t.querySelectorAll(".variante").forEach((e=>e.style.display="")))}));let n=t.resultadoBusqueda;e?0===l?(n.innerHTML='<span class="badge bg-danger">Sin resultados. Consultar existencia por WhatsApp</span>',n.classList.add("no-resultado"),n.classList.remove("resultado-encontrado")):(n.innerHTML='<span class="badge bg-success">'+l+" resultado"+(1!==l?"s":"")+" encontrado"+(1!==l?"s":"")+"</span>",n.classList.add("resultado-encontrado"),n.classList.remove("no-resultado")):(n.textContent="",n.classList.remove("no-resultado","resultado-encontrado"))}),300)),t.clearSearch.addEventListener("click",(()=>{t.searchGeneral.value="",t.searchGeneral.dispatchEvent(new Event("input"))})),t.marcasTrack.addEventListener("click",(e=>{let a=e.target.closest("img[data-marca]");a&&(t.searchGeneral.value=a.dataset.marca,t.searchGeneral.dispatchEvent(new Event("input")))}));
