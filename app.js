const e={csvUrl:"https://docs.google.com/spreadsheets/d/e/2PACX-1vRr62BlKCzICpC0ctnU2mRB8cq_SOCcsgydXQJXD5pQvasO1b1iT0Wp_L7sFxH8UGJCepaMjng1GUO0/pub?gid=1610793698&single=true&output=csv",cotizacionUrl:"https://docs.google.com/spreadsheets/d/e/2PACX-1vQJ7PS8pvnCKdpLgJFonsZNN54Rs8oTpzGgCxhbfZzd3KmKb9k12OEwgAWuDAHiIPraWKxoS5TlCm4X/pub?gid=0&single=true&output=csv",COTI_KEY:"cotiBlue",COTI_TTL:9e5,WA_BASE:"https://wa.me/5491127737463?text=",GLOSARIO:{ACCESORIOS:{adj:"est√°n disponibles",art:"las"},AIRPODS:{adj:"est√°n disponibles",art:"los"},AIRTAG:{adj:"est√°n disponibles",art:"los"},"APPLE WATCH":{adj:"est√° disponible",art:"el"},"DRONE DJI":{adj:"est√° disponible",art:"el"},GOPRO:{adj:"est√° disponible",art:"la"},INSTA360:{adj:"est√° disponible",art:"la"},IPAD:{adj:"est√° disponible",art:"el"},"IPHONE SEMINUEVOS":{adj:"est√° disponible",art:"el"},IPHONE:{adj:"est√° disponible",art:"el"},"MACBOOK AIR":{adj:"est√° disponible",art:"la"},"MACBOOK PRO":{adj:"est√° disponible",art:"la"},"NINTENDO SWITCH":{adj:"est√° disponible",art:"la"},PLAYSTATION:{adj:"est√° disponible",art:"la"},SAMSUNG:{adj:"est√° disponible",art:"el"},SMARTWATCH:{adj:"est√°n disponibles",art:"los"},VR:{adj:"est√°n disponibles",art:"los"},XBOX:{adj:"est√° disponible",art:"la"},XIAOMI:{adj:"est√° disponible",art:"el"},"XIAOMI (POCO)":{adj:"est√° disponible",art:"el"},"XIAOMI (REDMI + REDMI NOTE)":{adj:"est√° disponible",art:"el"}},ICONOS:{IPHONE:"bi-apple",AIRPODS:"bi-earbuds","APPLE WATCH":"bi-smartwatch",AIRTAG:"bi-tag",IPAD:"bi-tablet-fill","MACBOOK AIR":"bi-laptop","MACBOOK PRO":"bi-laptop",PLAYSTATION:"bi-playstation",XBOX:"bi-xbox","NINTENDO SWITCH":"bi-nintendo-switch",VR:"bi-headset-vr",GOPRO:"bi-camera-video",INSTA360:"bi-camera-video",SMARTWATCH:"bi-watch",ACCESORIOS:"bi-bag-plus","DRONE DJI":"bi-robot","IPHONE SEMINUEVOS":"bi-recycle"},BADGES:{NEW:'<span class="badge bg-warning text-dark">‚úàÔ∏è¬°NUEVO!</span>',SALE:'<span class="badge bg-danger">üî•¬°OFERTA!</span>',HOT:'<span class="badge bg-primary">üî• HOT</span>',LIMITED:'<span class="badge bg-info text-dark">‚è≥ LIMITADO</span>'},ALERTAS:{"MACBOOK AIR":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio","MACBOOK PRO":"Consultanos por versiones custom (Chip MAX, +RAM, etc). Tambi√©n traemos iMac, Mac mini, Mac Studio",IPHONE:"¬°Con la compra de un iPhone + U$30, llevate un cargador 20W Apple ORIGINAL!",SAMSUNG:"Por otros productos de la marca (Linea Z, Samsung Tab, etc) consultanos por WhatsApp",ACCESORIOS:"Consultar disponibilidad en modelos y colores","IPHONE SEMINUEVOS":"Todos los equipos fueron testeados y nunca reparados (piezas originales). Cable original incluido.<br>Garant√≠a escrita de 30 d√≠as por fallas."}},t={dolarValor:document.getElementById("dolarValor"),fechaActual:document.getElementById("fechaActual"),logoLink:document.getElementById("logo-link"),loader:document.querySelector(".loader-local"),categoriasContainer:document.getElementById("categoriasContainer"),plantillaCategoria:document.getElementById("plantilla-categoria"),searchGeneral:document.getElementById("searchGeneral"),clearSearch:document.getElementById("clearSearch"),resultadoBusqueda:document.getElementById("resultadoBusqueda"),faqModal:document.getElementById("faqModal"),marcasCarousel:document.getElementById("marcasCarousel")};function a(e){t.dolarValor.textContent=e}function n(t,a){const n=t.toUpperCase().trim(),{art:o="el/la",adj:r="est√° disponible"}=e.GLOSARIO[n]||{};return e.WA_BASE+encodeURIComponent(`¬°Hola! Vi ${o} ${t} ${a} en la web y me gustar√≠a saber si ${r}.`)}!function(){const t=function(){try{const t=localStorage.getItem(e.COTI_KEY);if(!t)return null;const{value:a,time:n}=JSON.parse(t);return Date.now()-n<e.COTI_TTL?a:null}catch{return null}}();t?a(t):fetch(e.cotizacionUrl).then((e=>e.text())).then((t=>{const n=t.trim().split("\n")[0]?.split(",")[0]?.replace(",",".")||"N/A";a(n),function(t){try{localStorage.setItem(e.COTI_KEY,JSON.stringify({value:t,time:Date.now()}))}catch{}}(n)})).catch((()=>a("Error")))}(),t.fechaActual.textContent=new Intl.DateTimeFormat("es-AR").format(new Date),t.logoLink?.addEventListener("click",(e=>{e.preventDefault(),location.reload()})),t.loader?.classList.remove("loader-local-hidden"),Papa.parse(e.csvUrl,{download:!0,complete:({data:a})=>{const o=function(e){const t=[];let a=null,n=[],o=[],r=!1;e.forEach((e=>{const s=e.map((e=>(e||"").trim())),l=s.filter(Boolean);1===l.length&&l[0]===l[0].toUpperCase()?(a&&n.length&&t.push({nombre:a,headers:n,productos:o}),a=l[0],n=[],o=[],r=!0):r?(n=s,r=!1):n.length&&l.length&&o.push(s)})),a&&n.length&&t.push({nombre:a,headers:n,productos:o});return t}(a);var r;r=o,t.categoriasContainer.innerHTML="",r.forEach(((a,o)=>{const{nombre:r,headers:s,productos:l}=a,i=e=>s.indexOf(e),c="IPHONE SEMINUEVOS"===r,d="ACCESORIOS"===r,u=t.plantillaCategoria.content.cloneNode(!0),p=u.querySelector(".accordion-button"),m=u.querySelector(".accordion-collapse"),b=`collapse-cat-${o}`;p.dataset.bsTarget=`#${b}`,p.setAttribute("aria-controls",b),m.id=b,u.querySelector(".icono-categoria").className=`me-2 icono-categoria ${e.ICONOS[r]||"bi bi-phone"}`,u.querySelector(".nombre-categoria").textContent=r,c&&p.classList.add("used-usados"),u.querySelector(".alerta-categoria").innerHTML=e.ALERTAS[r]?`<div class="alert alert-info d-flex justify-content-center align-items-center text-center mb-3 py-2 px-3">\n                    <i class="bi bi-info-circle-fill me-2"></i>\n                    <div class="small">${e.ALERTAS[r]}</div>\n                </div>`:"";const g=document.createElement("div");g.className="lista-productos",c?function(t,a,o){const{productoIdx:r=0,capacidadIdx:s,colorIdx:l,condicionIdx:i,bateriaIdx:c,precioIdx:d,fotosIdx:u,badgeIdx:p,ocultarIdx:m,nombre:b}=o;a.forEach((a=>{if(-1!==m&&"x"===a[m]?.toLowerCase())return;const o=void 0!==r?a[r]?.trim():"",g=a[s]?.trim(),C=a[l]?.trim(),f=a[i]?.trim(),E=a[c]?.trim(),I=a[d]?.trim(),h=-1!==u?a[u]?.trim():void 0,v=-1!==p?a[p]?.trim():void 0;if(!o&&!g&&!I)return;const x=document.createElement("div");x.className="grupo-modelo tarjeta-producto";const O=document.createElement("div");O.className="titulo-modelo",O.textContent=o||"-",h&&O.appendChild(function(e){const t=document.createElement("a");return t.className="btn btn-link btn-sm ms-2 p-0",t.href=e,t.target="_blank",t.rel="noopener noreferrer",t.innerHTML="Ver fotos",t.setAttribute("aria-label","Ver fotos del producto"),t}(h)),x.appendChild(O);const A=document.createElement("div");A.className="variante primera-variante d-flex justify-content-between align-items-center";const S=document.createElement("div");S.style.display="flex",S.style.flexDirection="column",S.style.gap="0.1rem",S.innerHTML=`\n            <div><strong><i class="bi bi-memory"></i> Capacidad:</strong> ${g||"-"}</div>\n            <div><strong><i class="bi bi-paint-bucket"></i> Color:</strong> ${C||"-"}</div>\n            <div><strong><i class="bi bi-star"></i> Condici√≥n:</strong> ${f||"-"}</div>\n            <div><strong><i class="bi bi-battery-charging"></i> Bater√≠a:</strong> ${E||"N/D"}</div>\n        `;const L=document.createElement("div");L.className="precio-badge",v&&e.BADGES[v]&&(L.innerHTML=e.BADGES[v]),L.appendChild(Object.assign(document.createElement("div"),{textContent:I||"Consultar"})),A.append(S,L),x.appendChild(A);const y=document.createElement("a");y.className="btn btn-wsp btn-sm d-inline-flex align-items-center gap-1 mt-2 ms-auto",y.href=n(b,o),y.target="_blank",y.rel="noopener noreferrer",y.innerHTML='<i class="bi bi-whatsapp"></i><span class="wsp-label">Consultar</span>';const T=document.createElement("div");T.className="d-flex justify-content-end",T.appendChild(y),x.appendChild(T),t.appendChild(x)}))}(g,l,{productoIdx:i("Producto"),capacidadIdx:i("Capacidad"),colorIdx:i("Color"),condicionIdx:i("Condici√≥n"),bateriaIdx:i("Bateria"),precioIdx:i("Precio"),fotosIdx:i("Fotos"),badgeIdx:i("L"),ocultarIdx:i("Ocultar"),nombre:r}):d?function(t,a,o){const{productoIdx:r,infoIdx:s,coloresIdx:l,precioIdx:i,fotosIdx:c,badgeIdx:d,ocultarIdx:u,nombre:p}=o;a.forEach((a=>{if(-1!==u&&"x"===a[u]?.toLowerCase())return;const o=a[r]?.trim(),m=a[s]?.trim(),b=void 0!==l?a[l]?.trim():void 0,g=a[i]?.trim(),C=a[c]?.trim(),f=a[d]?.trim();if(!o&&!m&&!g)return;const E=document.createElement("div");E.className="grupo-modelo tarjeta-producto";const I=document.createElement("div");I.className="titulo-modelo",I.textContent=o||"-",C&&I.appendChild(function(e){const t=document.createElement("button");return t.className="btn btn-link btn-sm ms-2 p-0",t.innerHTML="Ver fotos",t.setAttribute("aria-label","Ver fotos del producto"),t.dataset.bsToggle="modal",t.dataset.bsTarget="#modalFotos",t.addEventListener("click",(()=>{const t=e.split(",").map((e=>e.trim())).filter(Boolean),a=document.querySelector("#carouselFotos .carousel-inner");a.innerHTML="",t.forEach(((e,t)=>{const n=document.createElement("div");n.className="carousel-item"+(0===t?" active":""),n.innerHTML=`<img src="${e}" class="d-block w-75 mx-auto" alt="Foto ${t+1}">`,a.appendChild(n)}))})),t}(C)),E.appendChild(I);const h=document.createElement("div");h.className="variante primera-variante d-flex justify-content-between align-items-center";const v=document.createElement("div");v.style.display="flex",v.style.flexDirection="column",v.style.gap="0.1rem",v.innerHTML=`\n            <div><strong><i class="bi bi-info-circle"></i> Info:</strong> ${m||"-"}</div>\n            <div><strong><i class="bi bi-paint-bucket"></i> Colores:</strong> ${b||"-"}</div>\n        `;const x=document.createElement("div");x.className="precio-badge",f&&e.BADGES[f]&&(x.innerHTML=e.BADGES[f]),x.appendChild(Object.assign(document.createElement("div"),{textContent:g||"Consultar"})),h.append(v,x),E.appendChild(h);const O=document.createElement("a");O.className="btn btn-wsp btn-sm d-inline-flex align-items-center gap-1 mt-2 ms-auto",O.href=n(p,o),O.target="_blank",O.rel="noopener noreferrer",O.innerHTML='<i class="bi bi-whatsapp"></i><span class="wsp-label">Consultar</span>';const A=document.createElement("div");A.className="d-flex justify-content-end",A.appendChild(O),E.appendChild(A),t.appendChild(E)}))}(g,l,{productoIdx:i("Producto"),infoIdx:i("Informaci√≥n"),coloresIdx:i("Colores"),precioIdx:i("Precio"),fotosIdx:i("Fotos"),badgeIdx:i("L"),ocultarIdx:i("Ocultar"),nombre:r}):function(t,a,o){const{modeloIdx:r,varianteIdx:s,precioIdx:l,specsIdx:i,badgeIdx:c,ocultarIdx:d,nombre:u}=o;let p="",m=!0,b=null;a.forEach(((o,g)=>{if(-1!==d&&"x"===o[d]?.toLowerCase())return;const C=o[r]?.trim(),f=o[s]?.trim(),E=o[l]?.trim(),I=o[i]?.trim(),h=o[c]?.trim();if(!C)return;if(C!==p){p=C,m=!0,b=null;const e=document.createElement("div");e.className="grupo-modelo tarjeta-producto";const a=document.createElement("div");a.className="titulo-modelo";const o=document.createElement("span");if(o.textContent=C,a.appendChild(o),I){const e=document.createElement("a");e.href=I,e.textContent="Ver ficha",e.target="_blank",e.rel="noopener noreferrer",e.className="btn btn-link btn-sm p-0 ms-auto",a.appendChild(e)}e.appendChild(a),t.appendChild(e),b=document.createElement("a"),b.className="btn btn-wsp btn-sm d-inline-flex align-items-center gap-1",b.href=n(u,C),b.target="_blank",b.rel="noopener noreferrer",b.innerHTML='<i class="bi bi-whatsapp"></i><span class="wsp-label">Consultar</span>'}const v=document.createElement("div");v.className="variante"+(m?" primera-variante":""),m=!1;const x=document.createElement("div");x.className="detalle",x.textContent=f;const O=document.createElement("div");O.className="precio-badge",h&&e.BADGES[h]&&(O.innerHTML=e.BADGES[h]),O.appendChild(Object.assign(document.createElement("div"),{textContent:E||"Consultar"})),v.append(x,O),t.lastElementChild.appendChild(v);const A=a[g+1]?.[r]?.trim();if(C!==A){const e=document.createElement("div");e.className="d-flex justify-content-end mt-2",e.appendChild(b),t.lastElementChild.appendChild(e)}}))}(g,l,{modeloIdx:0,varianteIdx:1,precioIdx:i("Precio"),specsIdx:i("Specs"),badgeIdx:i("L"),ocultarIdx:i("Ocultar"),nombre:r}),m.querySelector(".accordion-body").appendChild(g),t.categoriasContainer.appendChild(u)})),t.loader.classList.add("loader-local-hidden")}}),t.faqModal?.addEventListener("hidden.bs.modal",(()=>{document.querySelectorAll("#faqModal .accordion-collapse.show").forEach((e=>bootstrap.Collapse.getOrCreateInstance(e).hide()))})),t.searchGeneral.addEventListener("input",function(e,t){let a;return(...n)=>{clearTimeout(a),a=setTimeout((()=>e(...n)),t)}}((function(){const e=t.searchGeneral.value.toLowerCase().trim(),a=e.split(/\s+/).filter(Boolean);let n=0;t.resultadoBusqueda.textContent="",document.querySelectorAll(".accordion-flush").forEach((t=>{const o=t.querySelector(".accordion-button"),r=t.querySelector(".accordion-collapse"),s=bootstrap.Collapse.getOrCreateInstance(r,{toggle:!1}),l=o.textContent.toLowerCase();let i=!1;t.querySelectorAll(".grupo-modelo").forEach((e=>{let t=!1;const o=e.querySelector(".titulo-modelo"),r=o?o.textContent.toLowerCase():"";e.querySelectorAll(".variante").forEach((e=>{const o=e.querySelector(".detalle")?.innerText.toLowerCase()||"",s=e.querySelector(".badge")?.innerText.toLowerCase()||"",i=`${l} ${r} ${o} ${s}`,c=a.every((e=>i.includes(e)));e.style.display=c?"":"none",c&&(t=!0,n++)})),e.style.display=t?"":"none",t&&(i=!0)})),e?i?(t.style.display="",s.show(),o.classList.remove("collapsed")):(t.style.display="none",s.hide(),o.classList.add("collapsed")):(t.style.display="",s.hide(),o.classList.add("collapsed"),t.querySelectorAll(".variante").forEach((e=>e.style.display="")))}));const o=t.resultadoBusqueda;e?0===n?(o.innerHTML='<span class="badge bg-danger">Sin resultados. Consultar existencia por WhatsApp</span>',o.classList.add("no-resultado"),o.classList.remove("resultado-encontrado")):(o.innerHTML='<span class="badge bg-success">'+n+" resultado"+(1!==n?"s":"")+" encontrado"+(1!==n?"s":"")+"</span>",o.classList.add("resultado-encontrado"),o.classList.remove("no-resultado")):(o.textContent="",o.classList.remove("no-resultado","resultado-encontrado"))}),300)),t.clearSearch.addEventListener("click",(()=>{t.searchGeneral.value="",t.searchGeneral.dispatchEvent(new Event("input"))})),function(){const e=document.querySelector(".marcas-track-wrapper"),t=document.querySelector(".marcas-track"),a=document.querySelector(".marcas-arrow-left"),n=document.querySelector(".marcas-arrow-right");if(!(e&&t&&a&&n))return;a.addEventListener("click",(function(){e.scrollBy({left:-330,behavior:"smooth"})})),n.addEventListener("click",(function(){e.scrollBy({left:330,behavior:"smooth"})})),e.addEventListener("wheel",(function(t){Math.abs(t.deltaX)<Math.abs(t.deltaY)||(t.preventDefault(),e.scrollBy({left:t.deltaY,behavior:"smooth"}))}),{passive:!1}),t.addEventListener("click",(function(e){const t=e.target.closest(".brand-logo[data-marca]");if(!t)return;const a=document.getElementById("searchGeneral");a&&(a.value=t.dataset.marca,a.dispatchEvent(new Event("input")),a.focus())}));let o,r,s=!1;e.addEventListener("mousedown",(t=>{s=!0,e.classList.add("dragging"),o=t.pageX-e.getBoundingClientRect().left,r=e.scrollLeft,t.preventDefault()})),document.addEventListener("mouseup",(()=>{s=!1,e.classList.remove("dragging")})),document.addEventListener("mousemove",(t=>{if(!s)return;const a=1.2*(t.pageX-e.getBoundingClientRect().left-o);e.scrollLeft=r-a})),e.addEventListener("touchstart",(t=>{s=!0,o=t.touches[0].pageX-e.getBoundingClientRect().left,r=e.scrollLeft})),e.addEventListener("touchend",(()=>{s=!1})),e.addEventListener("touchmove",(t=>{if(!s)return;const a=1.2*(t.touches[0].pageX-e.getBoundingClientRect().left-o);e.scrollLeft=r-a}))}();
